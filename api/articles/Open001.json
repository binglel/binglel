{"title":"语音增强模型-SEGAN开源代码","slug":"Open001","date":"2021-03-02T02:56:46.000Z","updated":"2021-03-20T14:31:03.000Z","comments":true,"path":"api/articles/Open001.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h1 id=\"源码\"><a href=\"#源码\" class=\"headerlink\" title=\"源码\"></a>源码</h1><ul>\n<li><a href=\"https://github.com/santi-pdp/segan\">segan_Tensorflow</a></li>\n</ul>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><h2 id=\"虚拟空间\"><a href=\"#虚拟空间\" class=\"headerlink\" title=\"虚拟空间\"></a>虚拟空间</h2><p>CUDA v8.0 + CUDNN v5.1</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n py2_tf0.12_gpu python=2.7</span><br><span class=\"line\">source activate py2_tf0.12_gpu</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/santi-pdp/segan</span><br><span class=\"line\">cd segan</span><br><span class=\"line\">sudo apt install sox</span><br><span class=\"line\">pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"数据处理\"><a href=\"#数据处理\" class=\"headerlink\" title=\"数据处理\"></a>数据处理</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 754 prepare_data.sh</span><br><span class=\"line\">./prepare_data.sh</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h2><pre>\n~/segan/data ~/segan\nINFLATING CLEAN TRAINSET ZIP...\nCONVERTING CLEAN WAVS TO 16K...\n~/segan/data/clean_trainset_wav ~/segan/data ~/segan\n~/segan/data ~/segan\nINFLATING NOISY TRAINSET ZIP...\nCONVERTING NOISY WAVS TO 16K...\n~/segan/data/noisy_trainset_wav ~/segan/data ~/segan\n~/segan/data ~/segan\n~/segan\nPREPARING TRAINING DATA...\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\n--------------------------------------------------\nProcessing wav file 11572/11572 data/clean_trainset_wav_16k/p233_033.wav          \n**************************************************\nTotal processing and writing time: 35.0719149113 s\n</pre>\n\n<p>首先完成数据下载和解压，然后通过sox工具完成采样频率转换（to 16kHz），接着读取成对的干净语音和带躁语音，通过一个重叠50%的滑动窗口（2^14）生成标准单位（大约1秒）的2^14（16384）个采样点，最后将所有生成的数据存储为一个TFRecord格式的文件，目的是在训练时可高效读取。</p>\n<h1 id=\"模型训练\"><a href=\"#模型训练\" class=\"headerlink\" title=\"模型训练\"></a>模型训练</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 754 train_segan.sh</span><br><span class=\"line\">./train_segan.sh</span><br></pre></td></tr></table></figure>\n\n<p>在NVIDIA GeForce RTX 3080单卡（显存10G+内存16G）上使用默认参数(batch_size=100)进行训练，大约用时10h。<br>而在NVIDIA GeForce GTX 1080单卡（显存8G+内存16G）上使用调整参数(batch_size=24)进行训练，大约用时49h。</p>\n<h2 id=\"模型结构可视化\"><a href=\"#模型结构可视化\" class=\"headerlink\" title=\"模型结构可视化\"></a>模型结构可视化</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tensorboard --logdir=&quot;segan_allbiased_preemph/train&quot;</span><br></pre></td></tr></table></figure>\n\n<p>浏览地址<br><a href=\"http://127.0.1.1:6006/\">http://127.0.1.1:6006</a></p>\n<p>更多信息可参阅官网及源码！</p>\n","more":"<h1 id=\"源码\"><a href=\"#源码\" class=\"headerlink\" title=\"源码\"></a>源码</h1><ul>\n<li><a href=\"https://github.com/santi-pdp/segan\">segan_Tensorflow</a></li>\n</ul>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><h2 id=\"虚拟空间\"><a href=\"#虚拟空间\" class=\"headerlink\" title=\"虚拟空间\"></a>虚拟空间</h2><p>CUDA v8.0 + CUDNN v5.1</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n py2_tf0.12_gpu python=2.7</span><br><span class=\"line\">source activate py2_tf0.12_gpu</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/santi-pdp/segan</span><br><span class=\"line\">cd segan</span><br><span class=\"line\">sudo apt install sox</span><br><span class=\"line\">pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"数据处理\"><a href=\"#数据处理\" class=\"headerlink\" title=\"数据处理\"></a>数据处理</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 754 prepare_data.sh</span><br><span class=\"line\">./prepare_data.sh</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h2><pre>\n~/segan/data ~/segan\nINFLATING CLEAN TRAINSET ZIP...\nCONVERTING CLEAN WAVS TO 16K...\n~/segan/data/clean_trainset_wav ~/segan/data ~/segan\n~/segan/data ~/segan\nINFLATING NOISY TRAINSET ZIP...\nCONVERTING NOISY WAVS TO 16K...\n~/segan/data/noisy_trainset_wav ~/segan/data ~/segan\n~/segan/data ~/segan\n~/segan\nPREPARING TRAINING DATA...\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\n--------------------------------------------------\nProcessing wav file 11572/11572 data/clean_trainset_wav_16k/p233_033.wav          \n**************************************************\nTotal processing and writing time: 35.0719149113 s\n</pre>\n\n<p>首先完成数据下载和解压，然后通过sox工具完成采样频率转换（to 16kHz），接着读取成对的干净语音和带躁语音，通过一个重叠50%的滑动窗口（2^14）生成标准单位（大约1秒）的2^14（16384）个采样点，最后将所有生成的数据存储为一个TFRecord格式的文件，目的是在训练时可高效读取。</p>\n<h1 id=\"模型训练\"><a href=\"#模型训练\" class=\"headerlink\" title=\"模型训练\"></a>模型训练</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 754 train_segan.sh</span><br><span class=\"line\">./train_segan.sh</span><br></pre></td></tr></table></figure>\n\n<p>在NVIDIA GeForce RTX 3080单卡（显存10G+内存16G）上使用默认参数(batch_size=100)进行训练，大约用时10h。<br>而在NVIDIA GeForce GTX 1080单卡（显存8G+内存16G）上使用调整参数(batch_size=24)进行训练，大约用时49h。</p>\n<h2 id=\"模型结构可视化\"><a href=\"#模型结构可视化\" class=\"headerlink\" title=\"模型结构可视化\"></a>模型结构可视化</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tensorboard --logdir=&quot;segan_allbiased_preemph/train&quot;</span><br></pre></td></tr></table></figure>\n\n<p>浏览地址<br><a href=\"http://127.0.1.1:6006/\">http://127.0.1.1:6006</a></p>\n<p>更多信息可参阅官网及源码！</p>\n","categories":[{"name":"Open","path":"api/categories/Open.json"}],"tags":[{"name":"Python","path":"api/tags/Python.json"},{"name":"开源代码","path":"api/tags/开源代码.json"},{"name":"TensorFlow","path":"api/tags/TensorFlow.json"},{"name":"语音增强","path":"api/tags/语音增强.json"},{"name":"GAN","path":"api/tags/GAN.json"},{"name":"SEGAN","path":"api/tags/SEGAN.json"}]}